<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="longevity, Scala, NoSQL, MongoDB, Cassandra, database, Domain Driven Design" />
    <meta name="description" content="A Persistence Framework for Scala and NoSQL" />

    <meta property="og:title" content="longevity"/>
    <meta property="og:description" content="A Persistence Framework for Scala and NoSQL"/>
    <meta property="og:image" content="http://longevityframework.org/images/longevity.png" />
    <meta property='og:url' content="http://longevityframework.org/" />

    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/stylesheets/longevity.css">
    <link rel="stylesheet" href="/stylesheets/stylesheet.css">
    <link rel="stylesheet" href="/stylesheets/github-light.css">
    <link rel="stylesheet" href="/stylesheets/print.css" media="print">
    <link rel="stylesheet" href="/stylesheets/emacs.css">

    <link rel="icon" type="image/png" href="http://longevityframework.org/favicon.png" >

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
      Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-42481814-3', 'auto');
      ga('send', 'pageview');
    </script>

    
    <title>offsets and limits</title>
    
  </head>

  <body>
    <header>
      <div class="inner">
        <h1><a href="/" class="nostyle">longevity</a></h1>
        <h2>
          A Persistence Framework for Scala and NoSQL
        </h2>
        <a href="https://github.com/longevityframework/longevity" class="button">
          <small>View project on</small> GitHub
        </a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          
          <h1> offsets and limits </h1>
          
          <p>Longevity also supports offset and limit clauses for your queries. For
example, suppose we want to display users by username, and we want to
page the results. We construct a method that will return a query that
will retrieve a single page of results:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="n">userPageQuery</span><span class="o">(</span><span class="n">pageNum</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">pageSize</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Query</span><span class="o">[</span><span class="kt">User</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">import</span> <span class="nn">User.queryDsl._</span>
  <span class="k">import</span> <span class="nn">User.props._</span>
  <span class="n">filterAll</span> <span class="n">orderBy</span> <span class="n">username</span> <span class="n">offset</span> <span class="n">pageNum</span> <span class="o">*</span> <span class="n">pageSize</span> <span class="n">limit</span> <span class="n">pageSize</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">orderBy</code>, <code class="highlighter-rouge">offset</code>, and <code class="highlighter-rouge">limit</code> clauses are all optional, and can
occur whether or not the other two clauses appear. But the clauses
have to occur in the right order, so variations such as these will not
work:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// these combinations won't work:
</span>
<span class="n">filterAll</span> <span class="n">offset</span> <span class="n">pageNum</span> <span class="o">*</span> <span class="n">pageSize</span> <span class="n">limit</span> <span class="n">pageSize</span> <span class="n">orderBy</span> <span class="n">username</span>

<span class="n">filterAll</span> <span class="n">orderBy</span> <span class="n">username</span> <span class="n">limit</span> <span class="n">pageSize</span> <span class="n">offset</span> <span class="n">pageNum</span> <span class="o">*</span> <span class="n">pageSize</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">offset</code> and <code class="highlighter-rouge">limit</code> clauses will affect performance. A large
offset will see performance degrade, as the back end generally has to
collect all the results with an offset less than the offset you
supplied. The limit clause will only improve performace for unordered
queries, or when the back end is able to collect the ordered results
in place. See the section of <a href="order-by.html">ordered queries</a> for a
description of when this is possible.</p>

<div style="display: flex;
            justify-content: space-between;
            text-align: center;
            margin-left: 3em;
            margin-right: 3em;">

<div style="min-width: 10em">

  prev: <a href="order-by.html">ordered queries</a>

</div>

<div style="min-width: 10em">

up: <a href=".">queries</a>

</div>

<div style="min-width: 10em">

next: <a href="retrieve-by.html">retrieval by query</a>

</div>

</div>


        </section>

        <aside id="sidebar">
          <a href="/feature-list.html"                                      class="button">Feature List    </a>
          <a href="/getting-started"                                        class="button">Getting Started </a>
          <a href="/manual"                                                 class="button">User Manual     </a>
          <a href="/api"                                                    class="button">Scaladocs       </a>
          <a href="https://groups.google.com/forum/#!forum/longevity-users" class="button">Discussion Forum</a>
          <a href="/resources.html"                                         class="button">Resources       </a>
        </aside>
      </div>
    </div>
  
  </body>
</html>
